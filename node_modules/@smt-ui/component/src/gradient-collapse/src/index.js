/**
 * 带渐变的展开收起组件
 * @author zhangwen22(zhangwen22@baidu.com)
 */
import {upx2rpx} from '../../common/utils/px';
/* global Component, swan */
Component({
    externalClasses: [ // exlint-disable-line
        'gradient-collapse-class',
        'gradient-content-class',
        'gradient-collapse-btn-class',
        'gradient-collapse-btn-text-class'
    ],
    properties: {
        // 初始状态是展开还是收起(默认为收起)
        expand: {
            type: Boolean,
            value: false,
            observer(value) {
                this.setData({
                    currentExpand: value
                });
            }
        },
        // 组件中收起内容的高度
        height: {
            type: String,
            value: upx2rpx(360) + 'rpx'
        },
        // 默认的icon颜色
        iconColor: {
            type: String,
            value: '#999'
        },
        // 默认的icon大小
        iconSize: {
            type: String,
            value: upx2rpx(48) + 'rpx'
        },
        // 是否展示 展开/收起文字及按钮
        showButton: {
            type: Boolean,
            value: true
        },
        // 控制按钮文字
        buttonText: {
            type: Array,
            value: ['查看更多', '收起']
        },
        // 需要隐藏的文字是否带渐变效果
        isFadeOut: {
            type: Boolean,
            value: true
        }
    },
    data: {
        // 当前展开/收起状态
        currentExpand: false,
        // 记录上一次的高度
        defaultHeight: ''
    },

    created() {
        const {height, showButton} = this.data;
        this.setData({
            height: showButton ? height : 'auto',
            defaultHeight: height
        });
    },

    /**
     * 点击展开/收起按钮
     */
    btnClick() {
        let {currentExpand, defaultHeight} = this.data;
        currentExpand = !currentExpand;
        this.setData({
            currentExpand,
            height: currentExpand ? 'auto' : defaultHeight
        }, () => {
            this.triggerEvent('expand', {expand: currentExpand});
        });
    }
});



